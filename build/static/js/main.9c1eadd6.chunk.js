(this.webpackJsonpreact_project=this.webpackJsonpreact_project||[]).push([[0],{64:function(e,t,c){},70:function(e,t,c){},77:function(e,t,c){},80:function(e,t,c){"use strict";c.r(t);var a=c(2),n=c.n(a),r=c(39),s=c.n(r),i=(c(64),c(22)),j=(c(70),c(0)),o=c.n(j),u=c(5),b=c(15),l=c(20),h=c(17),O=c(81),d=c(82),f=c(50),x=c(85),p=c(83),m=c(3),v=function(e){var t=e.onLogin,c=e.onSignUp,n=Object(a.useState)(""),r=Object(b.a)(n,2),s=r[0],i=r[1],j=Object(a.useState)(""),o=Object(b.a)(j,2),u=o[0],h=o[1];return Object(m.jsxs)(O.a,{className:"container-lg mt-2",fluid:"md",children:[Object(m.jsxs)(d.a,{className:"mb-2",children:[Object(m.jsx)(f.a,{xs:2,children:Object(m.jsx)(l.b,{to:"/profile",children:Object(m.jsx)("h4",{children:"Profile page"})})}),Object(m.jsx)(f.a,{xs:2,children:Object(m.jsx)(l.b,{to:"/chats",children:Object(m.jsx)("h4",{children:"Chats"})})}),Object(m.jsx)(f.a,{xs:2,children:Object(m.jsx)(l.b,{to:"/news",children:Object(m.jsx)("h4",{children:"News"})})})]}),Object(m.jsx)("h2",{children:"This is home page"}),Object(m.jsx)("h3",{children:t?"Login":"SignUp"}),Object(m.jsxs)(x.a,{onSubmit:function(e){e.preventDefault(),i(""),h(""),t?t(s,u):c(s,u)},className:"w-50 d-grid gap-1",children:[Object(m.jsx)(x.a.Control,{placeholder:"login",type:"text",value:s,onChange:function(e){i(e.target.value)}}),Object(m.jsx)(x.a.Control,{placeholder:"password",type:"password",value:u,onChange:function(e){h(e.target.value)}}),Object(m.jsx)(p.a,{type:"submit",children:"Submit"})]})]})},g=c(52),S=c(34),C=c(53);Object(g.a)({apiKey:"AIzaSyCZbDjb10lZWZNTDamXIGNZt1jbkactCko",authDomain:"react-project-gb.firebaseapp.com",databaseURL:"https://react-project-gb-default-rtdb.europe-west1.firebasedatabase.app",projectId:"react-project-gb",storageBucket:"react-project-gb.appspot.com",messagingSenderId:"635186210782",appId:"1:635186210782:web:b57e1e255f848e287c1f4f"});var y=Object(S.b)(),w=Object(C.a)(),E=function(){var e=Object(u.a)(o.a.mark((function e(t,c){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(S.a)(y,t,c);case 2:case"end":return e.stop()}}),e)})));return function(t,c){return e.apply(this,arguments)}}(),N=function(){var e=Object(u.a)(o.a.mark((function e(t,c){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(S.d)(y,t,c);case 2:case"end":return e.stop()}}),e)})));return function(t,c){return e.apply(this,arguments)}}(),k=function(){var e=Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(S.e)(y);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),A=c(19),D="MESSAGES::ADD_MESSAGE",T="MESSAGES::DELETE_MESSAGE",I="MESSAGES::SET_MESSAGES",L=function(){return function(e){var t=Object(A.c)(w,"messages");Object(A.b)(t,(function(t){var c=t.val();e({type:I,payload:c||{}})}))}},_=function(e,t,c){return function(){var a="message-".concat(Date.now()),n=Object(A.c)(w,"messages/".concat(c,"/").concat(a));Object(A.e)(n,{author:t,text:e,id:a})}},G=(c(77),function(e){var t=e.author,c=e.text,a=e.id;return Object(m.jsxs)(d.a,{className:"text-primary mt-4",children:[Object(m.jsx)(f.a,{xs:2,className:"text-left ",children:t}),Object(m.jsx)(f.a,{xs:8,className:"text-center text-justify",children:c}),Object(m.jsx)(f.a,{xs:2,className:"text-end",children:a})]})}),M=function(e){var t=e.handleSubmit,c=e.handleChange,a=e.inputRef,n=e.value;return Object(m.jsxs)(x.a,{onSubmit:t,children:[Object(m.jsx)(x.a.Control,{as:"textarea",placeholder:"Message",value:n,onChange:c,ref:a,className:"text-primary"}),Object(m.jsx)(p.a,{variant:"outline-primary",className:"mt-2",type:"submit",children:"Send message"})]})};function R(e){var t=e.onSubmit,c=Object(a.useRef)(null),n=Object(a.useState)(""),r=Object(b.a)(n,2),s=r[0],i=r[1],j=Object(a.useCallback)((function(e){i(e.target.value)}),[]);return Object(m.jsx)(M,{value:s,inputRef:c,handleChange:j,handleSubmit:function(e){e.preventDefault(),t(s),i(""),c.current.focus()}})}var H=c(86),P="CHATS::ADD_CHAT",F="CHATS::DELETE_CHAT",U="CHATS::SET_CHATS",q=function(){return function(e){var t=Object(A.c)(w,"chats");Object(A.b)(t,(function(t){var c,a=t.val();e((c=Object.values(a||{}),{type:U,payload:c}))}))}},B=function(e){var t=e.chat,c=e.id,a=e.onDelete,n=Object(i.b)();return Object(m.jsxs)("div",{className:"d-flex mt-1",children:[Object(m.jsx)(H.a.Item,{action:!0,className:"d-flex text-primary p-0 w-50",children:Object(m.jsx)(l.b,{className:"d-block p-2 w-100 text-decoration-none",to:"/chats/".concat(c),children:t.name})},c),Object(m.jsx)(p.a,{onClick:function(){var e;n(function(e){return function(){var t=Object(A.c)(w,"chats/".concat(e));Object(A.d)(t)}}(c)),n((e=c,function(){var t=Object(A.c)(w,"messages/".concat(e));Object(A.d)(t)})),a(c)},children:"Delete"})]})},X=function(e){e.onAddChat;var t=Object(a.useState)(""),c=Object(b.a)(t,2),n=c[0],r=c[1],s=Object(i.b)();return Object(m.jsxs)(x.a,{onSubmit:function(e){var t;e.preventDefault(),s((t=n,function(){var e="chat-".concat(Date.now()),c=Object(A.c)(w,"chats/".concat(e));Object(A.e)(c,{id:e,name:t})})),r("")},children:[Object(m.jsx)(x.a.Control,{placeholder:"Add new Chat",value:n,type:"text",onChange:function(e){r(e.target.value)},className:"text-primary my-1 w-50"}),Object(m.jsx)(p.a,{type:"submit",disabled:!n,children:"Add chat"})]})};function Z(e){var t=e.chats,c=e.onDeleteChat,a=e.onAddChat;return Object(m.jsxs)(H.a,{children:[t.map((function(e){return Object(m.jsx)(B,{chat:e,id:e.id,onDelete:c},e.id)})),Object(m.jsx)(X,{onAddChat:a})]})}var J="HUMAN",K="Bot",z=0,V=1,W=2,Q=3,Y=function(e){return e.chatsStore.chats},$=function(e){return e.messagesStore.messages};var ee=function(){var e,t=Object(h.h)().chatId,c=Object(h.g)(),n=Object(i.b)(),r=Object(i.c)($),s=Object(i.c)(Y),j=Object(a.useMemo)((function(){return e=t,function(t){return!!t.chatsStore.chats.find((function(t){return e===t.id}))};var e}),[t]),o=Object(i.c)(j);Object(a.useEffect)((function(){n(q()),n(L())}),[]);var u=Object(a.useCallback)((function(c,a){n(_(c,a,t)),a===J&&(clearTimeout(e),e=setTimeout((function(){n(_("I am bot",K,t))}),1500))}),[n,t]),b=Object(a.useCallback)((function(e){u(e,J)}),[u]),x=Object(a.useCallback)((function(e){n(function(e){return{type:P,payload:e}}(e))}),[n]),p=Object(a.useCallback)((function(e){n(function(e){return{type:F,payload:e}}(e)),t===e&&(1===s.length?c.push("/chats"):c.push("/chats/".concat(s[0].id)))}),[t,n,s,c]);return Object(m.jsxs)(O.a,{className:"App mt-2",fluid:"md",children:[Object(m.jsxs)(d.a,{className:"mb-2",children:[Object(m.jsx)(f.a,{xs:2,children:Object(m.jsx)(l.b,{to:"/profile",children:Object(m.jsx)("h4",{children:"Profile page"})})}),Object(m.jsx)(f.a,{children:Object(m.jsx)(l.b,{to:"/news",children:Object(m.jsx)("h4",{children:"News"})})})]}),Object(m.jsxs)(d.a,{children:[Object(m.jsx)(f.a,{xs:4,children:Object(m.jsx)(Z,{chats:s,onAddChat:x,onDeleteChat:p})}),Object(m.jsx)(f.a,{xs:8,children:!!t&&o&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(R,{onSubmit:b}),Object.values(r[t]||{}||[]).map((function(e){return Object(m.jsx)(G,{author:e.author,text:e.text,id:e.id},e.id)}))]})})]})]})},te=function(e){var t=e.onLogout,c=Object(a.useState)(""),n=Object(b.a)(c,2),r=n[0],s=n[1],i=Object(a.useState)(""),j=Object(b.a)(i,2),o=j[0],u=j[1];Object(a.useEffect)((function(){var e=Object(A.c)(w,"user");return Object(A.b)(e,(function(e){var t=e.val();u((null===t||void 0===t?void 0:t.username)||"")})),function(){u("")}}),[]);return Object(m.jsxs)(O.a,{className:"mt-2",fluid:"md",children:[Object(m.jsxs)(d.a,{className:"mb-2",children:[Object(m.jsx)(f.a,{xs:2,children:Object(m.jsx)(l.b,{to:"/chats",children:Object(m.jsx)("h4",{children:"Chats"})})}),Object(m.jsx)(f.a,{children:Object(m.jsx)(l.b,{to:"/news",children:Object(m.jsx)("h4",{children:"News"})})})]}),Object(m.jsx)("h2",{children:"This is profile page"}),Object(m.jsxs)(x.a,{className:"d-flex w-25 mb-1",onSubmit:function(e){e.preventDefault(),s(""),Object(A.e)(Object(A.c)(w,"user"),{username:r})},children:[Object(m.jsx)(x.a.Control,{type:"text",value:r,onChange:function(e){s(e.target.value)}}),Object(m.jsx)(p.a,{type:"submit",children:"Submit"})]}),Object(m.jsx)("h4",{children:o}),Object(m.jsx)(p.a,{onClick:function(){t()},children:"Logout"})]})},ce=c(84),ae="ARTICLES::GET_PENDING",ne="ARTICLES::GET_SUCCESS",re="ARTICLES::GET_FAILURE",se=function(e){return e.articlesStore.request.status===V},ie=function(e){return e.articlesStore.list},je=function(e){return e.articlesStore.request.error},oe=function(){var e=Object(i.b)(),t=Object(i.c)(je),c=Object(i.c)(se),n=Object(i.c)(ie),r=function(){e(function(){var e=Object(u.a)(o.a.mark((function e(t){var c,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:ae}),e.prev=1,e.next=4,fetch("https://api.spaceflightnewsapi.net/v3/articles");case 4:if((c=e.sent).ok){e.next=7;break}throw new Error("error ".concat(c.status));case 7:return e.next=9,c.json();case 9:a=e.sent,t({type:ne,payload:a}),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),console.log(e.t0),t((n=e.t0.message,{type:re,payload:n}));case 17:case"end":return e.stop()}var n}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}())};return Object(a.useEffect)((function(){r()}),[]),Object(m.jsxs)(O.a,{className:"container-lg mt-2",fluid:"md",children:[Object(m.jsxs)(d.a,{className:"mb-2",children:[Object(m.jsx)(f.a,{xs:2,children:Object(m.jsx)(l.b,{to:"/profile",children:Object(m.jsx)("h4",{children:"Profile page"})})}),Object(m.jsx)(f.a,{children:Object(m.jsx)(l.b,{to:"/chats",children:Object(m.jsx)("h4",{children:"Chats"})})})]}),Object(m.jsxs)(d.a,{children:[Object(m.jsx)("h2",{children:"News"}),t?Object(m.jsxs)("div",{className:"text-center",children:[Object(m.jsxs)("h4",{children:["Error: ",t]}),Object(m.jsx)(p.a,{className:"w-25",onClick:r,children:"Refresh"})]}):n.map((function(e){return Object(m.jsx)("article",{children:Object(m.jsx)("h4",{children:e.title})},e.id)})),c&&Object(m.jsx)(ce.a,{className:"m-auto",animation:"border",variant:"primary"})]})]})},ue=c(8),be=c(11),le=["authed"],he=function(e){var t=e.authed,c=Object(be.a)(e,le);return t?Object(m.jsx)(h.a,{to:"/profile"}):Object(m.jsx)(h.b,Object(ue.a)({},c))},Oe=["authed"],de=function(e){var t=e.authed,c=Object(be.a)(e,Oe);return t?Object(m.jsx)(h.b,Object(ue.a)({},c)):Object(m.jsx)(h.a,{to:"/login"})},fe=function(){var e=Object(a.useState)(!1),t=Object(b.a)(e,2),c=t[0],n=t[1],r=Object(a.useState)(""),s=Object(b.a)(r,2),i=s[0],j=s[1];Object(a.useEffect)((function(){return Object(S.c)(y,(function(e){n(!!e)}))}),[]);var O=function(){var e=Object(u.a)(o.a.mark((function e(t,c){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N(t,c);case 3:n(!0),e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0),j(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,c){return e.apply(this,arguments)}}(),d=function(){var e=Object(u.a)(o.a.mark((function e(t,c){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E(t,c);case 3:n(!0),e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0),j(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,c){return e.apply(this,arguments)}}(),f=function(){var e=Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k();case 3:e.next=9;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0),j(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}();return Object(m.jsx)(l.a,{children:Object(m.jsxs)(h.d,{children:[Object(m.jsx)(he,{path:"/",exact:!0,authed:c,children:Object(m.jsx)(v,{onLogin:d})}),Object(m.jsx)(he,{path:"/login",exact:!0,authed:c,children:Object(m.jsx)(v,{onLogin:O})}),Object(m.jsx)(he,{path:"/signup",exact:!0,authed:c,children:Object(m.jsx)(v,{onSignUp:d})}),Object(m.jsx)(de,{path:"/profile",exact:!0,authed:c,children:Object(m.jsx)(te,{onLogout:f})}),Object(m.jsx)(de,{path:"/chats/:chatId?",component:ee,authed:c}),Object(m.jsx)(h.b,{path:"/news",children:Object(m.jsx)(oe,{})}),Object(m.jsx)(h.b,{children:Object(m.jsx)("h4",{children:i||"404"})})]})})},xe=c(56),pe=c(47),me=c(57),ve=c.n(me),ge=c(32),Se="PROFILE::TOGGLE_CHECKBOX",Ce="PROFILE::CHANGE_NAME",ye={checkboxState:!1,name:"default"},we=c(27),Ee={chats:[]},Ne=c(4),ke={messages:{}},Ae={list:[],request:{error:null,status:z}},De=[xe.a],Te={key:"root",storage:ve.a},Ie=Object(ge.b)({profileStore:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ye,t=arguments.length>1?arguments[1]:void 0,c=t.type,a=t.payload;switch(c){case Se:return Object(ue.a)(Object(ue.a)({},e),{},{checkboxState:!e.checkboxState});case Ce:return Object(ue.a)(Object(ue.a)({},e),{},{name:a});default:return e}},chatsStore:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ee,t=arguments.length>1?arguments[1]:void 0,c=t.type,a=t.payload;switch(c){case P:return Object(ue.a)(Object(ue.a)({},e),{},{chats:[].concat(Object(we.a)(e.chats),[{id:"chats-".concat(Date.now()),name:a}])});case F:var n=e.chats.filter((function(e){return e.id!==a}));return Object(ue.a)(Object(ue.a)({},e),{},{chats:n});case U:return Object(ue.a)(Object(ue.a)({},e),{},{chats:a});default:return e}},messagesStore:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ke,t=arguments.length>1?arguments[1]:void 0,c=t.type,a=t.payload;switch(c){case D:return Object(ue.a)(Object(ue.a)({},e),{},{messages:Object(ue.a)(Object(ue.a)({},e.messages),{},Object(Ne.a)({},a.chatId,[].concat(Object(we.a)(Object.values(e.messages[a.chatId])||{}||[]),[{id:"message-".concat(Date.now()),text:a.text,author:a.author}])))});case T:var n=e.messages[a.chatId].filter((function(e){return e.id!==a.id}));return Object(ue.a)(Object(ue.a)({},e),{},{messages:Object(ue.a)(Object(ue.a)({},e.messages),{},Object(Ne.a)({},a.chatId,n))});case I:return Object(ue.a)(Object(ue.a)({},e),{},{messages:a});default:return e}},articlesStore:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ae,t=arguments.length>1?arguments[1]:void 0,c=t.type,a=t.payload;switch(c){case ae:return Object(ue.a)(Object(ue.a)({},e),{},{request:{error:null,status:V}});case ne:return Object(ue.a)(Object(ue.a)({},e),{},{request:Object(ue.a)(Object(ue.a)({},e.request),{},{status:W}),list:a});case re:return Object(ue.a)(Object(ue.a)({},e),{},{request:{error:a,status:Q}});default:return e}}}),Le=Object(pe.a)(Te,Ie),_e=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||ge.c,Ge=Object(ge.d)(Le,_e(ge.a.apply(void 0,De))),Me=Object(pe.b)(Ge),Re=c(58);var He=function(){return Object(m.jsx)(i.a,{store:Ge,children:Object(m.jsx)(Re.a,{persistor:Me,children:Object(m.jsx)(fe,{})})})},Pe=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,87)).then((function(t){var c=t.getCLS,a=t.getFID,n=t.getFCP,r=t.getLCP,s=t.getTTFB;c(e),a(e),n(e),r(e),s(e)}))};s.a.render(Object(m.jsx)(n.a.StrictMode,{children:Object(m.jsx)(He,{})}),document.getElementById("root")),Pe()}},[[80,1,2]]]);
//# sourceMappingURL=main.9c1eadd6.chunk.js.map